---
const {src, title, allow,width, heigth, playlist} = Astro.props

function getId(url) {
            const regExp =
              /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
    
            return match && match[2].length === 11 ? `${match[2]}` : null;
}
---


<div class="divIframe" style={{width, heigth}}>
    <iframe
        allow={allow}
        src={!playlist ? `//www.youtube.com/embed/ + ${getId(src)}` : src}
        loading="lazy"
        width="100%"
        height="100%"
        title={title}
    >
    </iframe>
</div>

<style>
    .divIframe{
        display: flex;
        position: relative;
        aspect-ratio: 16/9;
    }
    .iframe{
        width: 100%;
        height: 100%;
    }
</style>